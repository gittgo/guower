<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="com.ourslook.guower.dao.common.TbUserDao">

    <!-- 可根据自己的需求，是否要使用 -->
    <resultMap type="com.ourslook.guower.entity.common.TbUserEntity" id="tbUserMap">
        <result property="userid" column="userid"/>
        <result property="username" column="username"/>
        <result property="password" column="password"/>
        <result property="name" column="name"/>
        <result property="mobile" column="mobile"/>
        <result property="status" column="status"/>
        <result property="headportraitimg" column="HeadPortraitImg"/>
        <result property="createtime" column="createtime"/>
        <result property="signature" column="signature"/>
        <result property="sex" column="sex"/>
        <result property="qqacc" column="qqAcc"/>
        <result property="weichatacc" column="weichatAcc"/>
        <result property="sinaacc" column="sinaAcc"/>
        <result property="remaindermoney" column="RemainderMoney"/>
        <result property="usercode" column="usercode"/>
        <result property="recommendcode" column="recommendCode"/>
        <result property="identification" column="identification"/>
        <result property="idcardimg1" column="idcardImg1"/>
        <result property="idcard" column="idcard"/>
        <result property="idcardimg2" column="idcardImg2"/>
        <result property="organizationimg2" column="organizationImg2"/>
        <result property="businesslicenseimg" column="businessLicenseImg"/>
        <result property="taxationimg" column="taxationImg"/>
        <result property="school" column="school"/>
        <result property="studyHotelRoomNum" column="study_hotel_room_num"/>
        <result property="payPassword" column="pay_password"/>
        <result property="studyHotel" column="study_hotel"/>
        <result property="professional" column="professional"/>
        <result property="alipayAcount" column="alipay_Acount"/>
        <result property="alipayQrIn" column="alipay_qr_in"/>
        <result property="alipayQrOutDynamic" column="alipay_qr_out_dynamic"/>
        <result property="alipayQrOutStatic" column="alipay_qr_out_static"/>
        <result property="switchVoiceOrder" column="switch_voice_order"/>
        <result property="switchVoiceInQr" column="switch_voice_in_qr"/>
        <result property="userTypes" column="user_types"/>
        <result property="extends1" column="extends1"/>
        <result property="extends2" column="extends2"/>
        <result property="extends3" column="extends3"/>
        <result property="extends4" column="extends4"/>
        <result property="extends5" column="extends5"/>
        <result property="extends6" column="extends6"/>
        <result property="extends7" column="extends7"/>
        <result property="extends8" column="extends8"/>
        <result property="studyHotelName" column="study_hotel_name"/>
        <result property="relationStatus" column="relation_status"/>
    </resultMap>

    <select id="queryObject" resultType="com.ourslook.guower.entity.common.TbUserEntity">
        SELECT *
        FROM tb_user
        WHERE userid = #{value}
    </select>

    <select id="queryList" resultType="com.ourslook.guower.entity.common.TbUserEntity">
        select * from tb_user
        <where>
            <!-- mysql: columename1 = 1 和 columename1 = '1' 是一样，所以一般统一使用字符串类型 -->
            <if test=" userid_IN != null ">
                and `userid` in
                <foreach item="item" index="index" collection="userid_IN" open="(" separator="," close=")">
                    #{item}
                </foreach>
            </if>
            <if test="userid != null and userid.trim() != ''">
                and `userid` = #{userid}
            </if>
            <if test="username != null and username.trim() != ''">
                and `username` like concat('%',#{username},'%')
            </if>
            <if test="password != null and password.trim() != ''">
                and `password` like concat('%',#{password},'%')
            </if>
            <if test="name != null and name.trim() != ''">
                and `name` like concat('%',#{name},'%')
            </if>
            <if test="mobile != null and mobile.trim() != ''">
                and `mobile` like concat('%',#{mobile},'%')
            </if>
            <if test="status != null and status.trim() != ''">
                and `status` like concat('%',#{status},'%')
            </if>
            <if test="headportraitimg != null and headportraitimg.trim() != ''">
                and `HeadPortraitImg` like concat('%',#{headportraitimg},'%')
            </if>
            <if test="createtime != null and createtime.trim() != ''">
                and `CreateTime` like concat('%',#{createtime},'%')
            </if>
            <if test="signature != null and signature.trim() != ''">
                and `signature` like concat('%',#{signature},'%')
            </if>
            <if test="sex != null and sex.trim() != ''">
                and `sex` like concat('%',#{sex},'%')
            </if>
            <if test="qqacc != null and qqacc.trim() != ''">
                and `qqAcc` like concat('%',#{qqacc},'%')
            </if>
            <if test="weichatacc != null and weichatacc.trim() != ''">
                and `weichatAcc` like concat('%',#{weichatacc},'%')
            </if>
            <if test="sinaacc != null and sinaacc.trim() != ''">
                and `sinaAcc` like concat('%',#{sinaacc},'%')
            </if>
            <if test="remaindermoney != null and remaindermoney.trim() != ''">
                and `RemainderMoney` like concat('%',#{remaindermoney},'%')
            </if>
            <if test="usercode != null and usercode.trim() != ''">
                and `usercode` = #{usercode}
            </if>
            <if test="recommendcode != null and recommendcode.trim() != ''">
                and `recommendCode` = #{recommendcode}
            </if>
            <if test="identification != null and identification.trim() != ''">
                and `identification` like concat('%',#{identification},'%')
            </if>
            <if test="idcardimg1 != null and idcardimg1.trim() != ''">
                and `idcardImg1` like concat('%',#{idcardimg1},'%')
            </if>
            <if test="idcard != null and idcard.trim() != ''">
                and `idcard` like concat('%',#{idcard},'%')
            </if>
            <if test="idcardimg2 != null and idcardimg2.trim() != ''">
                and `idcardImg2` like concat('%',#{idcardimg2},'%')
            </if>
            <if test="organizationimg2 != null and organizationimg2.trim() != ''">
                and `organizationImg2` like concat('%',#{organizationimg2},'%')
            </if>
            <if test="businesslicenseimg != null and businesslicenseimg.trim() != ''">
                and `businessLicenseImg` like concat('%',#{businesslicenseimg},'%')
            </if>
            <if test="taxationimg != null and taxationimg.trim() != ''">
                and `taxationImg` like concat('%',#{taxationimg},'%')
            </if>
            <if test="school != null and school.trim() != ''">
                and `school` like concat('%',#{school},'%')
            </if>
            <if test="studyHotelRoomNum != null and studyHotelRoomNum.trim() != ''">
                and `study_hotel_room_num` like concat('%',#{studyHotelRoomNum},'%')
            </if>
            <if test="payPassword != null and payPassword.trim() != ''">
                and `pay_password` like concat('%',#{payPassword},'%')
            </if>
            <if test="studyHotel != null and studyHotel.trim() != ''">
                and `study_hotel` like concat('%',#{studyHotel},'%')
            </if>
            <if test="professional != null and professional.trim() != ''">
                and `professional` like concat('%',#{professional},'%')
            </if>
            <if test="alipayAcount != null and alipayAcount.trim() != ''">
                and `alipay_Acount` like concat('%',#{alipayAcount},'%')
            </if>
            <if test="alipayQrIn != null and alipayQrIn.trim() != ''">
                and `alipay_qr_in` like concat('%',#{alipayQrIn},'%')
            </if>
            <if test="alipayQrOutDynamic != null and alipayQrOutDynamic.trim() != ''">
                and `alipay_qr_out_dynamic` like concat('%',#{alipayQrOutDynamic},'%')
            </if>
            <if test="alipayQrOutStatic != null and alipayQrOutStatic.trim() != ''">
                and `alipay_qr_out_static` like concat('%',#{alipayQrOutStatic},'%')
            </if>
            <if test="switchVoiceOrder != null and switchVoiceOrder.trim() != ''">
                and `switch_voice_order` like concat('%',#{switchVoiceOrder},'%')
            </if>
            <if test="switchVoiceInQr != null and switchVoiceInQr.trim() != ''">
                and `switch_voice_in_qr` like concat('%',#{switchVoiceInQr},'%')
            </if>
            <if test="userTypes != null">
                and `user_types` = #{userTypes}
            </if>
            <if test="userType != null">
                and `user_types` = #{userType}
            </if>
            <if test="extends1 != null and extends1.trim() != ''">
                and `extends1` like concat('%',#{extends1},'%')
            </if>
            <if test="extends2 != null and extends2.trim() != ''">
                and `extends2` like concat('%',#{extends2},'%')
            </if>
            <if test="extends3 != null and extends3.trim() != ''">
                and `extends3` like concat('%',#{extends3},'%')
            </if>
            <if test="extends4 != null and extends4.trim() != ''">
                and `extends4` like concat('%',#{extends4},'%')
            </if>
            <if test="extends5 != null and extends5.trim() != ''">
                and `extends5` like concat('%',#{extends5},'%')
            </if>
            <if test="extends6 != null and extends6.trim() != ''">
                and `extends6` like concat('%',#{extends6},'%')
            </if>
            <if test="extends7 != null and extends7.trim() != ''">
                and `extends7` like concat('%',#{extends7},'%')
            </if>
            <if test="extends8 != null and extends8.trim() != ''">
                and `extends8` like concat('%',#{extends8},'%')
            </if>
            <if test="relationStatus != null and relationStatus.trim() != ''">
                and `relation_status` like concat('%',#{relationStatus},'%')
            </if>
            <if test="studyHotelName != null and studyHotelName.trim() != ''">
                and `study_hotel_name` like concat('%',#{studyHotelName},'%')
            </if>
            <if test=" userType_IN != null ">
                and `user_types` in
                <foreach item="item" index="index" collection="userType_IN" open="(" separator="," close=")">
                    #{item}
                </foreach>
            </if>
            <if test="createtime_BETWEEN != null and createtime_BETWEEN.trim() != ''">
                and `CreateTime` BETWEEN #{createtime_BETWEEN_1start} AND #{createtime_BETWEEN_2end}
            </if>
            <if test="publicUnder != null and publicUnder.trim() != ''">
                and `userid` &lt;&gt; #{publicUnder}
            </if>
        </where>
        <choose>
            <when test="sidx != null and sidx.trim() != ''">
                order by ${sidx} ${order}
            </when>
            <otherwise>
                order by userid desc
            </otherwise>
        </choose>
        <if test="offset != null and limit != null">
            limit #{offset}, #{limit}
        </if>
    </select>

    <select id="queryTotal" resultType="int">
        select count(*) from tb_user
        <where>
            <if test="userid != null">
                and `userid` = #{userid}
            </if>
            <if test=" userid_IN != null ">
                and `userid` in
                <foreach item="item" index="index" collection="userid_IN" open="(" separator="," close=")">
                    #{item}
                </foreach>
            </if>
            <if test="username != null and username.trim() != ''">
                and `username` like concat('%',#{username},'%')
            </if>
            <if test="password != null and password.trim() != ''">
                and `password` like concat('%',#{password},'%')
            </if>
            <if test="name != null and name.trim() != ''">
                and `name` like concat('%',#{name},'%')
            </if>
            <if test="mobile != null and mobile.trim() != ''">
                and `mobile` like concat('%',#{mobile},'%')
            </if>
            <if test="status != null and status != ''">
                and `status` like concat('%',#{status},'%')
            </if>
            <if test="headportraitimg != null and headportraitimg.trim() != ''">
                and `HeadPortraitImg` like concat('%',#{headportraitimg},'%')
            </if>
            <if test="createtime != null and createtime != ''">
                and `CreateTime` like concat('%',#{createtime},'%')
            </if>
            <if test="signature != null and signature.trim() != ''">
                and `signature` like concat('%',#{signature},'%')
            </if>
            <if test="sex != null and sex != ''">
                and `sex` like concat('%',#{sex},'%')
            </if>
            <if test="qqacc != null and qqacc.trim() != ''">
                and `qqAcc` like concat('%',#{qqacc},'%')
            </if>
            <if test="weichatacc != null and weichatacc.trim() != ''">
                and `weichatAcc` like concat('%',#{weichatacc},'%')
            </if>
            <if test="sinaacc != null and sinaacc.trim() != ''">
                and `sinaAcc` like concat('%',#{sinaacc},'%')
            </if>
            <if test="remaindermoney != null and remaindermoney != ''">
                and `RemainderMoney` like concat('%',#{remaindermoney},'%')
            </if>
            <if test="usercode != null and usercode.trim() != ''">
                and `usercode` like concat('%',#{usercode},'%')
            </if>
            <if test="recommendcode != null and recommendcode.trim() != ''">
                and `recommendCode` like concat('%',#{recommendcode},'%')
            </if>
            <if test="identification != null and identification != ''">
                and `identification` like concat('%',#{identification},'%')
            </if>
            <if test="idcardimg1 != null and idcardimg1.trim() != ''">
                and `idcardImg1` like concat('%',#{idcardimg1},'%')
            </if>
            <if test="idcard != null and idcard.trim() != ''">
                and `idcard` like concat('%',#{idcard},'%')
            </if>
            <if test="idcardimg2 != null and idcardimg2.trim() != ''">
                and `idcardImg2` like concat('%',#{idcardimg2},'%')
            </if>
            <if test="organizationimg2 != null and organizationimg2.trim() != ''">
                and `organizationImg2` like concat('%',#{organizationimg2},'%')
            </if>
            <if test="businesslicenseimg != null and businesslicenseimg.trim() != ''">
                and `businessLicenseImg` like concat('%',#{businesslicenseimg},'%')
            </if>
            <if test="taxationimg != null and taxationimg.trim() != ''">
                and `taxationImg` like concat('%',#{taxationimg},'%')
            </if>
            <if test="school != null and school.trim() != ''">
                and `school` like concat('%',#{school},'%')
            </if>
            <if test="studyHotelRoomNum != null and studyHotelRoomNum.trim() != ''">
                and `study_hotel_room_num` like concat('%',#{studyHotelRoomNum},'%')
            </if>
            <if test="payPassword != null and payPassword.trim() != ''">
                and `pay_password` like concat('%',#{payPassword},'%')
            </if>
            <if test="studyHotel != null and studyHotel.trim() != ''">
                and `study_hotel` like concat('%',#{studyHotel},'%')
            </if>
            <if test="professional != null and professional.trim() != ''">
                and `professional` like concat('%',#{professional},'%')
            </if>
            <if test="alipayAcount != null and alipayAcount.trim() != ''">
                and `alipay_Acount` like concat('%',#{alipayAcount},'%')
            </if>
            <if test="alipayQrIn != null and alipayQrIn.trim() != ''">
                and `alipay_qr_in` like concat('%',#{alipayQrIn},'%')
            </if>
            <if test="alipayQrOutDynamic != null and alipayQrOutDynamic.trim() != ''">
                and `alipay_qr_out_dynamic` like concat('%',#{alipayQrOutDynamic},'%')
            </if>
            <if test="alipayQrOutStatic != null and alipayQrOutStatic.trim() != ''">
                and `alipay_qr_out_static` like concat('%',#{alipayQrOutStatic},'%')
            </if>
            <if test="switchVoiceOrder != null and switchVoiceOrder != ''">
                and `switch_voice_order` like concat('%',#{switchVoiceOrder},'%')
            </if>
            <if test="switchVoiceInQr != null and switchVoiceInQr != ''">
                and `switch_voice_in_qr` like concat('%',#{switchVoiceInQr},'%')
            </if>
            <if test="userTypes != null and userTypes != ''">
                and `user_types` = #{userTypes}
            </if>
            <if test="userType != null">
                and `user_types` = #{userType}
            </if>
            <if test="extends1 != null and extends1.trim() != ''">
                and `extends1` like concat('%',#{extends1},'%')
            </if>
            <if test="extends2 != null and extends2.trim() != ''">
                and `extends2` like concat('%',#{extends2},'%')
            </if>
            <if test="extends3 != null and extends3.trim() != ''">
                and `extends3` like concat('%',#{extends3},'%')
            </if>
            <if test="extends4 != null and extends4.trim() != ''">
                and `extends4` like concat('%',#{extends4},'%')
            </if>
            <if test="extends5 != null and extends5.trim() != ''">
                and `extends5` like concat('%',#{extends5},'%')
            </if>
            <if test="extends6 != null and extends6.trim() != ''">
                and `extends6` like concat('%',#{extends6},'%')
            </if>
            <if test="extends7 != null and extends7.trim() != ''">
                and `extends7` like concat('%',#{extends7},'%')
            </if>
            <if test="extends8 != null and extends8.trim() != ''">
                and `extends8` like concat('%',#{extends8},'%')
            </if>
            <if test="studyHotelName != null and studyHotelName.trim() != ''">
                and `study_hotel_name` like concat('%',#{studyHotelName},'%')
            </if>
            <if test="relationStatus != null and relationStatus.trim() != ''">
                and `relation_status` like concat('%',#{relationStatus},'%')
            </if>
            <if test=" userType_IN != null ">
                and `user_types` in
                <foreach item="item" index="index" collection="userType_IN" open="(" separator="," close=")">
                    #{item}
                </foreach>
            </if>
        </where>
    </select>

    <insert id="save" parameterType="com.ourslook.guower.entity.common.TbUserEntity" useGeneratedKeys="true"
            keyProperty="userid">
        INSERT INTO tb_user
        (
            username,
            `password`,
            `name`,
            mobile,
            `status`,
            HeadPortraitImg,
            createtime,
            signature,
            sex,
            qqAcc,
            weichatAcc,
            sinaAcc,
            RemainderMoney,
            usercode,
            recommendCode,
            identification,
            idcardImg1,
            idcard,
            idcardImg2,
            organizationImg2,
            businessLicenseImg,
            taxationImg,
            school,
            study_hotel_room_num,
            pay_password,
            study_hotel,
            professional,
            alipay_Acount,
            alipay_qr_in,
            alipay_qr_out_dynamic,
            alipay_qr_out_static,
            switch_voice_order,
            switch_voice_in_qr,
            user_types,
            extends1,
            extends2,
            extends3,
            extends4,
            extends5,
            extends6,
            extends7,
            extends8,
            study_hotel_name,
            relation_status
        )
        VALUES
            (
                #{username},
                #{password},
                #{name},
                #{mobile},
                #{status},
                #{headportraitimg},
                #{createtime},
                #{signature},
                #{sex},
                #{qqacc},
                #{weichatacc},
                #{sinaacc},
                #{remaindermoney},
                #{usercode},
                #{recommendcode},
                #{identification},
                #{idcardimg1},
                #{idcard},
                #{idcardimg2},
                #{organizationimg2},
                #{businesslicenseimg},
                #{taxationimg},
                #{school},
                #{studyHotelRoomNum},
                #{payPassword},
                #{studyHotel},
                #{professional},
                #{alipayAcount},
                #{alipayQrIn},
                #{alipayQrOutDynamic},
                #{alipayQrOutStatic},
                #{switchVoiceOrder},
                #{switchVoiceInQr},
                #{userTypes},
                #{extends1},
                #{extends2},
                #{extends3},
                #{extends4},
                #{extends5},
                #{extends6},
                #{extends7},
                #{extends8},
                #{studyHotelName},
                #{relationStatus}
            )
    </insert>

    <update id="update" parameterType="com.ourslook.guower.entity.common.TbUserEntity">
        update tb_user
        <set>
            <if test="username != null">
                `username` = #{username},
            </if>
            <if test="password != null">
                `password` = #{password},
            </if>
            <if test="name != null">
                `name` = #{name},
            </if>
            <if test="mobile != null">
                `mobile` = #{mobile},
            </if>
            <if test="status != null">
                `status` = #{status},
            </if>
            <if test="headportraitimg != null">
                `HeadPortraitImg` = #{headportraitimg},
            </if>
            <if test="createtime != null">
                `CreateTime` = #{createtime},
            </if>
            <if test="signature != null">
                `signature` = #{signature},
            </if>
            <if test="sex != null">
                `sex` = #{sex},
            </if>
            <if test="qqacc != null">
                `qqAcc` = #{qqacc},
            </if>
            <if test="weichatacc != null">
                `weichatAcc` = #{weichatacc},
            </if>
            <if test="sinaacc != null">
                `sinaAcc` = #{sinaacc},
            </if>
            <if test="remaindermoney != null">
                `RemainderMoney` = #{remaindermoney},
            </if>
            <if test="usercode != null">
                `usercode` = #{usercode},
            </if>
            <if test="recommendcode != null">
                `recommendCode` = #{recommendcode},
            </if>
            <if test="identification != null">
                `identification` = #{identification},
            </if>
            <if test="idcardimg1 != null">
                `idcardImg1` = #{idcardimg1},
            </if>
            <if test="idcard != null">
                `idcard` = #{idcard},
            </if>
            <if test="idcardimg2 != null">
                `idcardImg2` = #{idcardimg2},
            </if>
            <if test="organizationimg2 != null">
                `organizationImg2` = #{organizationimg2},
            </if>
            <if test="businesslicenseimg != null">
                `businessLicenseImg` = #{businesslicenseimg},
            </if>
            <if test="taxationimg != null">
                `taxationImg` = #{taxationimg},
            </if>
            <if test="school != null">
                `school` = #{school},
            </if>
            <if test="studyHotelRoomNum != null">
                `study_hotel_room_num` = #{studyHotelRoomNum},
            </if>
            <if test="payPassword != null">
                `pay_password` = #{payPassword},
            </if>
            <if test="studyHotel != null">
                `study_hotel` = #{studyHotel},
            </if>
            <if test="professional != null">
                `professional` = #{professional},
            </if>
            <if test="alipayAcount != null">
                `alipay_Acount` = #{alipayAcount},
            </if>
            <if test="alipayQrIn != null">
                `alipay_qr_in` = #{alipayQrIn},
            </if>
            <if test="alipayQrOutDynamic != null">
                `alipay_qr_out_dynamic` = #{alipayQrOutDynamic},
            </if>
            <if test="alipayQrOutStatic != null">
                `alipay_qr_out_static` = #{alipayQrOutStatic},
            </if>
            <if test="switchVoiceOrder != null">
                `switch_voice_order` = #{switchVoiceOrder},
            </if>
            <if test="switchVoiceInQr != null">
                `switch_voice_in_qr` = #{switchVoiceInQr},
            </if>
            <if test="userTypes != null">
                `user_types` = #{userTypes},
            </if>
            <if test="extends1 != null">
                `extends1` = #{extends1},
            </if>
            <if test="extends2 != null">
                `extends2` = #{extends2},
            </if>
            <if test="extends3 != null">
                `extends3` = #{extends3},
            </if>
            <if test="extends4 != null">
                `extends4` = #{extends4},
            </if>
            <if test="extends5 != null">
                `extends5` = #{extends5},
            </if>
            <if test="extends6 != null">
                `extends6` = #{extends6},
            </if>
            <if test="extends7 != null">
                `extends7` = #{extends7},
            </if>
            <if test="extends8 != null">
                `extends8` = #{extends8},
            </if>
            <if test="studyHotelName != null">
                `study_hotel_name` = #{studyHotelName},
            </if>
            <if test="relationStatus != null">
                `relation_status` = #{relationStatus}
            </if>
        </set>
        where userid = #{userid}
    </update>

    <delete id="delete">
        DELETE FROM tb_user
        WHERE userid = #{value}
    </delete>

    <delete id="deleteBatch">
        delete from tb_user where userid in
        <foreach item="userid" collection="array" open="(" separator="," close=")">
            #{userid}
        </foreach>
    </delete>


    <select id="queryByMobile" resultType="com.ourslook.guower.entity.common.TbUserEntity">
        SELECT *
        FROM tb_user
        WHERE mobile = #{mobile}
        <if test="userTypes != null">
            and `user_types` = #{userTypes}
        </if>
        <if test="userType != null">
            and `user_types` = #{userType}
        </if>
        <if test=" userType_IN != null ">
            and `user_types` in
            <foreach item="item" index="index" collection="userTypes_IN" open="(" separator="," close=")">
                #{item}
            </foreach>
        </if>
        <if test=" userTypes_IN != null ">
            and `user_types` in
            <foreach item="item" index="index" collection="userTypes_IN" open="(" separator="," close=")">
                #{item}
            </foreach>
        </if>
    </select>

    <select id="queryByMobileAndUsertypeIn" resultType="com.ourslook.guower.entity.common.TbUserEntity">
        SELECT *
        FROM tb_user
        WHERE mobile = #{mobile}
        <if test=" userType_IN != null ">
            and `user_types` in
            <foreach item="item" index="index" collection="userType_IN" open="(" separator="," close=")">
                #{item}
            </foreach>
        </if>
        <if test=" userTypes_IN != null ">
            and `user_types` in
            <foreach item="item" index="index" collection="userTypes_IN" open="(" separator="," close=")">
                #{item}
            </foreach>
        </if>
    </select>

    <select id="queryByUsername" resultType="com.ourslook.guower.entity.common.TbUserEntity">
        SELECT *
        FROM tb_user
        WHERE username = #{value}
    </select>

    <select id="queryMobileList" resultType="java.lang.String">
        SELECT mobile
        FROM tb_user
    </select>

    <select id="queryIdList" resultType="java.lang.String">
        SELECT userid
        FROM tb_user
    </select>

    <select id="queryByUserCode" resultType="com.ourslook.guower.entity.common.TbUserEntity">
        SELECT *
        FROM tb_user
        WHERE usercode = #{value}
    </select>

    <select id="queryListUser" resultType="com.ourslook.guower.entity.common.TbUserEntity">
        select * from tb_user
        <where>
            <!-- mysql: columename1 = 1 和 columename1 = '1' 是一样，所以一般统一使用字符串类型 -->
            user_types != 1
            <if test=" userid_IN != null ">
                and `userid` in
                <foreach item="item" index="index" collection="userid_IN" open="(" separator="," close=")">
                    #{item}
                </foreach>
            </if>
            <if test="username != null and username.trim() != ''">
                and `username` like concat('%',#{username},'%')
            </if>
            <if test="password != null and password.trim() != ''">
                and `password` like concat('%',#{password},'%')
            </if>
            <if test="name != null and name.trim() != ''">
                and `name` like concat('%',#{name},'%')
            </if>
            <if test="mobile != null and mobile.trim() != ''">
                and `mobile` like concat('%',#{mobile},'%')
            </if>
            <if test="status != null and status.trim() != ''">
                and `status` like concat('%',#{status},'%')
            </if>
            <if test="headportraitimg != null and headportraitimg.trim() != ''">
                and `HeadPortraitImg` like concat('%',#{headportraitimg},'%')
            </if>
            <if test="createtime != null and createtime.trim() != ''">
                and `CreateTime` like concat('%',#{createtime},'%')
            </if>
            <if test="signature != null and signature.trim() != ''">
                and `signature` like concat('%',#{signature},'%')
            </if>
            <if test="sex != null and sex.trim() != ''">
                and `sex` like concat('%',#{sex},'%')
            </if>
            <if test="qqacc != null and qqacc.trim() != ''">
                and `qqAcc` like concat('%',#{qqacc},'%')
            </if>
            <if test="weichatacc != null and weichatacc.trim() != ''">
                and `weichatAcc` like concat('%',#{weichatacc},'%')
            </if>
            <if test="sinaacc != null and sinaacc.trim() != ''">
                and `sinaAcc` like concat('%',#{sinaacc},'%')
            </if>
            <if test="remaindermoney != null and remaindermoney.trim() != ''">
                and `RemainderMoney` like concat('%',#{remaindermoney},'%')
            </if>
            <if test="usercode != null and usercode.trim() != ''">
                and `usercode` like concat('%',#{usercode},'%')
            </if>
            <if test="recommendcode != null and recommendcode.trim() != ''">
                and `recommendCode` like concat('%',#{recommendcode},'%')
            </if>
            <if test="identification != null and identification.trim() != ''">
                and `identification` like concat('%',#{identification},'%')
            </if>
            <if test="idcardimg1 != null and idcardimg1.trim() != ''">
                and `idcardImg1` like concat('%',#{idcardimg1},'%')
            </if>
            <if test="idcard != null and idcard.trim() != ''">
                and `idcard` like concat('%',#{idcard},'%')
            </if>
            <if test="idcardimg2 != null and idcardimg2.trim() != ''">
                and `idcardImg2` like concat('%',#{idcardimg2},'%')
            </if>
            <if test="organizationimg2 != null and organizationimg2.trim() != ''">
                and `organizationImg2` like concat('%',#{organizationimg2},'%')
            </if>
            <if test="businesslicenseimg != null and businesslicenseimg.trim() != ''">
                and `businessLicenseImg` like concat('%',#{businesslicenseimg},'%')
            </if>
            <if test="taxationimg != null and taxationimg.trim() != ''">
                and `taxationImg` like concat('%',#{taxationimg},'%')
            </if>
            <if test="school != null and school.trim() != ''">
                and `school` like concat('%',#{school},'%')
            </if>
            <if test="studyHotelRoomNum != null and studyHotelRoomNum.trim() != ''">
                and `study_hotel_room_num` like concat('%',#{studyHotelRoomNum},'%')
            </if>
            <if test="payPassword != null and payPassword.trim() != ''">
                and `pay_password` like concat('%',#{payPassword},'%')
            </if>
            <if test="studyHotel != null and studyHotel.trim() != ''">
                and `study_hotel` like concat('%',#{studyHotel},'%')
            </if>
            <if test="professional != null and professional.trim() != ''">
                and `professional` like concat('%',#{professional},'%')
            </if>
            <if test="alipayAcount != null and alipayAcount.trim() != ''">
                and `alipay_Acount` like concat('%',#{alipayAcount},'%')
            </if>
            <if test="alipayQrIn != null and alipayQrIn.trim() != ''">
                and `alipay_qr_in` like concat('%',#{alipayQrIn},'%')
            </if>
            <if test="alipayQrOutDynamic != null and alipayQrOutDynamic.trim() != ''">
                and `alipay_qr_out_dynamic` like concat('%',#{alipayQrOutDynamic},'%')
            </if>
            <if test="alipayQrOutStatic != null and alipayQrOutStatic.trim() != ''">
                and `alipay_qr_out_static` like concat('%',#{alipayQrOutStatic},'%')
            </if>
            <if test="switchVoiceOrder != null and switchVoiceOrder.trim() != ''">
                and `switch_voice_order` like concat('%',#{switchVoiceOrder},'%')
            </if>
            <if test="switchVoiceInQr != null and switchVoiceInQr.trim() != ''">
                and `switch_voice_in_qr` like concat('%',#{switchVoiceInQr},'%')
            </if>
            <if test="userTypes != null">
                and `user_types` = #{userTypes}
            </if>
            <if test="userTypes_NE != null">
                and `user_types` != #{userTypes_NE}
            </if>
            <if test="extends1 != null and extends1.trim() != ''">
                and `extends1` like concat('%',#{extends1},'%')
            </if>
            <if test="extends2 != null and extends2.trim() != ''">
                and `extends2` like concat('%',#{extends2},'%')
            </if>
            <if test="extends3 != null and extends3.trim() != ''">
                and `extends3` like concat('%',#{extends3},'%')
            </if>
            <if test="extends4 != null and extends4.trim() != ''">
                and `extends4` like concat('%',#{extends4},'%')
            </if>
            <if test="extends5 != null and extends5.trim() != ''">
                and `extends5` like concat('%',#{extends5},'%')
            </if>
            <if test="extends6 != null and extends6.trim() != ''">
                and `extends6` like concat('%',#{extends6},'%')
            </if>
            <if test="extends7 != null and extends7.trim() != ''">
                and `extends7` like concat('%',#{extends7},'%')
            </if>
            <if test="studyHotelName != null and studyHotelName.trim() != ''">
                and `study_hotel_name` like concat('%',#{studyHotelName},'%')
            </if>
            <if test="extends8 != null and extends8.trim() != ''">
                and `extends8` like concat('%',#{extends8},'%')
            </if>
            <if test="relationStatus != null and relationStatus.trim() != ''">
                and `relation_status` like concat('%',#{relationStatus},'%')
            </if>
            <if test="createtime_BETWEEN != null and createtime_BETWEEN.trim() != ''">
                and `CreateTime` BETWEEN #{createtime_BETWEEN_1start} AND #{createtime_BETWEEN_2end}
            </if>
        </where>
        <choose>
            <when test="sidx != null and sidx.trim() != ''">
                order by ${sidx} ${order}
            </when>
            <otherwise>
                order by userid desc
            </otherwise>
        </choose>
        <if test="offset != null and limit != null">
            limit #{offset}, #{limit}
        </if>
    </select>

    <select id="queryTotalUser" resultType="java.lang.Integer">
        select count(*) from tb_user
        <where>
            user_types != 1
            <if test="userid != null">
                and `userid` like concat('%',#{userid},'%')
            </if>
            <if test="username != null and username.trim() != ''">
                and `username` like concat('%',#{username},'%')
            </if>
            <if test="password != null and password.trim() != ''">
                and `password` like concat('%',#{password},'%')
            </if>
            <if test="name != null and name.trim() != ''">
                and `name` like concat('%',#{name},'%')
            </if>
            <if test="mobile != null and mobile.trim() != ''">
                and `mobile` like concat('%',#{mobile},'%')
            </if>
            <if test="status != null and status != ''">
                and `status` like concat('%',#{status},'%')
            </if>
            <if test="headportraitimg != null and headportraitimg.trim() != ''">
                and `HeadPortraitImg` like concat('%',#{headportraitimg},'%')
            </if>
            <if test="createtime != null and createtime != ''">
                and `CreateTime` like concat('%',#{createtime},'%')
            </if>
            <if test="signature != null and signature.trim() != ''">
                and `signature` like concat('%',#{signature},'%')
            </if>
            <if test="sex != null and sex != ''">
                and `sex` like concat('%',#{sex},'%')
            </if>
            <if test="qqacc != null and qqacc.trim() != ''">
                and `qqAcc` like concat('%',#{qqacc},'%')
            </if>
            <if test="weichatacc != null and weichatacc.trim() != ''">
                and `weichatAcc` like concat('%',#{weichatacc},'%')
            </if>
            <if test="sinaacc != null and sinaacc.trim() != ''">
                and `sinaAcc` like concat('%',#{sinaacc},'%')
            </if>
            <if test="remaindermoney != null and remaindermoney != ''">
                and `RemainderMoney` like concat('%',#{remaindermoney},'%')
            </if>
            <if test="usercode != null and usercode.trim() != ''">
                and `usercode` like concat('%',#{usercode},'%')
            </if>
            <if test="recommendcode != null and recommendcode.trim() != ''">
                and `recommendCode` like concat('%',#{recommendcode},'%')
            </if>
            <if test="identification != null and identification != ''">
                and `identification` like concat('%',#{identification},'%')
            </if>
            <if test="idcardimg1 != null and idcardimg1.trim() != ''">
                and `idcardImg1` like concat('%',#{idcardimg1},'%')
            </if>
            <if test="idcard != null and idcard.trim() != ''">
                and `idcard` like concat('%',#{idcard},'%')
            </if>
            <if test="idcardimg2 != null and idcardimg2.trim() != ''">
                and `idcardImg2` like concat('%',#{idcardimg2},'%')
            </if>
            <if test="organizationimg2 != null and organizationimg2.trim() != ''">
                and `organizationImg2` like concat('%',#{organizationimg2},'%')
            </if>
            <if test="businesslicenseimg != null and businesslicenseimg.trim() != ''">
                and `businessLicenseImg` like concat('%',#{businesslicenseimg},'%')
            </if>
            <if test="taxationimg != null and taxationimg.trim() != ''">
                and `taxationImg` like concat('%',#{taxationimg},'%')
            </if>
            <if test="school != null and school.trim() != ''">
                and `school` like concat('%',#{school},'%')
            </if>
            <if test="studyHotelRoomNum != null and studyHotelRoomNum.trim() != ''">
                and `study_hotel_room_num` like concat('%',#{studyHotelRoomNum},'%')
            </if>
            <if test="payPassword != null and payPassword.trim() != ''">
                and `pay_password` like concat('%',#{payPassword},'%')
            </if>
            <if test="studyHotel != null and studyHotel.trim() != ''">
                and `study_hotel` like concat('%',#{studyHotel},'%')
            </if>
            <if test="professional != null and professional.trim() != ''">
                and `professional` like concat('%',#{professional},'%')
            </if>
            <if test="alipayAcount != null and alipayAcount.trim() != ''">
                and `alipay_Acount` like concat('%',#{alipayAcount},'%')
            </if>
            <if test="alipayQrIn != null and alipayQrIn.trim() != ''">
                and `alipay_qr_in` like concat('%',#{alipayQrIn},'%')
            </if>
            <if test="alipayQrOutDynamic != null and alipayQrOutDynamic.trim() != ''">
                and `alipay_qr_out_dynamic` like concat('%',#{alipayQrOutDynamic},'%')
            </if>
            <if test="alipayQrOutStatic != null and alipayQrOutStatic.trim() != ''">
                and `alipay_qr_out_static` like concat('%',#{alipayQrOutStatic},'%')
            </if>
            <if test="switchVoiceOrder != null and switchVoiceOrder != ''">
                and `switch_voice_order` like concat('%',#{switchVoiceOrder},'%')
            </if>
            <if test="switchVoiceInQr != null and switchVoiceInQr != ''">
                and `switch_voice_in_qr` like concat('%',#{switchVoiceInQr},'%')
            </if>
            <if test="userTypes != null">
                and `user_types` = #{userTypes}
            </if>
            <if test="userTypes_NE != null">
                and `user_types` != #{userTypes_NE}
            </if>
            <if test="userType != null ">
                and `user_types` = #{userTypes}
            </if>
            <if test="userType_NE != null">
                and `user_types` != #{userType_NE}
            </if>
            <if test="extends1 != null and extends1.trim() != ''">
                and `extends1` like concat('%',#{extends1},'%')
            </if>
            <if test="extends2 != null and extends2.trim() != ''">
                and `extends2` like concat('%',#{extends2},'%')
            </if>
            <if test="extends3 != null and extends3.trim() != ''">
                and `extends3` like concat('%',#{extends3},'%')
            </if>
            <if test="extends4 != null and extends4.trim() != ''">
                and `extends4` like concat('%',#{extends4},'%')
            </if>
            <if test="extends5 != null and extends5.trim() != ''">
                and `extends5` like concat('%',#{extends5},'%')
            </if>
            <if test="extends6 != null and extends6.trim() != ''">
                and `extends6` like concat('%',#{extends6},'%')
            </if>
            <if test="extends7 != null and extends7.trim() != ''">
                and `extends7` like concat('%',#{extends7},'%')
            </if>
            <if test="extends8 != null and extends8.trim() != ''">
                and `extends8` like concat('%',#{extends8},'%')
            </if>
            <if test="studyHotelName != null and studyHotelName.trim() != ''">
                and `study_hotel_name` like concat('%',#{studyHotelName},'%')
            </if>
            <if test="relationStatus != null and relationStatus.trim() != ''">
                and `relation_status` like concat('%',#{relationStatus},'%')
            </if>
            <if test="createtime_BETWEEN != null and createtime_BETWEEN.trim() != ''">
                and `CreateTime` BETWEEN #{createtime_BETWEEN_1start} AND #{createtime_BETWEEN_2end}
            </if>
        </where>
    </select>

    <!--根据楼id查询属于这栋楼的配送员userid-->
    <select id="queryUseridListByStudyHotel" resultType="java.lang.String">
        select userid from tb_user
        <where>
            <if test="studyHotel != null and studyHotel.trim() != ''">
                and `study_hotel` like concat('%',#{studyHotel},'%')
            </if>
            <if test="userTypes != null">
                and `user_types` = #{userTypes}
            </if>
            <if test=" userTypes_IN != null ">
                and `user_types` in
                <foreach item="item" index="index" collection="userTypes_IN" open="(" separator="," close=")">
                    #{item}
                </foreach>
            </if>
            <if test="userType != null">
                and `user_types` = #{userTypes}
            </if>
            <if test=" userType_IN != null ">
                and `user_types` in
                <foreach item="item" index="index" collection="userType_IN" open="(" separator="," close=")">
                    #{item}
                </foreach>
            </if>
        </where>
    </select>

    <!--查询本学校所有配送员的userid-->
    <select id="querySenderUserids" resultType="java.lang.String">
         select userid from tb_user
        <where>
            <if test="school != null and school != ''">
                and `school` like concat('%',#{school},'%')
            </if>
            <if test=" userType_IN != null ">
                and `user_types` in
                <foreach item="item" index="index" collection="userType_IN" open="(" separator="," close=")">
                    #{item}
                </foreach>
            </if>
            <if test=" userTypes_IN != null ">
                and `user_types` in
                <foreach item="item" index="index" collection="userTypes_IN" open="(" separator="," close=")">
                    #{item}
                </foreach>
            </if>
        </where>
    </select>

    <!--查询本学校某栋楼以外的所有配送员的userid-->
    <select id="querySenderUseridsByHotelId" resultType="java.lang.String">
        select userid from tb_user
        <where>
            <if test="studyHotel != null and studyHotel.trim() != ''">
                and `study_hotel`  &lt;&gt;  #{studyHotel}
            </if>
            <if test="schoolId != null and schoolId.trim() != ''">
                and `school`  =  #{schoolId}
            </if>
            <if test=" userType_IN != null ">
                and `user_types` in
                <foreach item="item" index="index" collection="userType_IN" open="(" separator="," close=")">
                    #{item}
                </foreach>
            </if>
            <if test=" userTypes_IN != null ">
                and `user_types` in
                <foreach item="item" index="index" collection="userTypes_IN" open="(" separator="," close=")">
                    #{item}
                </foreach>
            </if>
        </where>
    </select>

    <!--查询公共下级-->
    <select id="queryPublicPersonList" resultType="com.ourslook.guower.entity.common.TbUserEntity">
        select * from tb_user
        where recommendCode = 0
        and user_types &lt;&gt; 1
        and user_types &lt;&gt; 25
        <choose>
            <when test="sidx != null and sidx.trim() != ''">
                order by ${sidx} ${order}
            </when>
            <otherwise>
                order by userid desc
            </otherwise>
        </choose>
        <if test="offset != null and limit != null">
            limit #{offset}, #{limit}
        </if>
    </select>
    <!--根据我的会员编号查询我的所有下级的userid-->
    <select id="queryUserIdOfMySubordinate" resultType="java.lang.Long">
       SELECT userid FROM tb_user
       WHERE recommendCode = #{usercode}
    </select>
    <!-- 查询商家和商家所缴纳的保证金 -->
    <select id="queryShopList" resultType="com.ourslook.guower.vo.TbUserVo">
        select u.*,s.cash_deposit,i.pay_end_balance from tb_user u left join t_bus_shop_info s on u.userid = s.userid
        LEFT JOIN (SELECT * FROM (SELECT * FROM
        t_bss_wallet_income_expenses order by createtime desc) w WHERE w.ie_status &lt;&gt; 0 OR w.ie_status IS NULL GROUP BY w.userid ) i on u.userid = i.userid
        <where>
            <!-- mysql: columename1 = 1 和 columename1 = '1' 是一样，所以一般统一使用字符串类型 -->
            <if test=" userid_IN != null ">
                and `userid` in
                <foreach item="item" index="index" collection="userid_IN" open="(" separator="," close=")">
                    #{item}
                </foreach>
            </if>
            <if test="username != null and username.trim() != ''">
                and `username` like concat('%',#{username},'%')
            </if>
            <if test="password != null and password.trim() != ''">
                and `password` like concat('%',#{password},'%')
            </if>
            <if test="name != null and name.trim() != ''">
                and `name` like concat('%',#{name},'%')
            </if>
            <if test="mobile != null and mobile.trim() != ''">
                and `mobile` like concat('%',#{mobile},'%')
            </if>
            <if test="status != null and status.trim() != ''">
                and `status` like concat('%',#{status},'%')
            </if>
            <if test="headportraitimg != null and headportraitimg.trim() != ''">
                and `HeadPortraitImg` like concat('%',#{headportraitimg},'%')
            </if>
            <if test="signature != null and signature.trim() != ''">
                and `signature` like concat('%',#{signature},'%')
            </if>
            <if test="sex != null and sex.trim() != ''">
                and `sex` like concat('%',#{sex},'%')
            </if>
            <if test="qqacc != null and qqacc.trim() != ''">
                and `qqAcc` like concat('%',#{qqacc},'%')
            </if>
            <if test="weichatacc != null and weichatacc.trim() != ''">
                and `weichatAcc` like concat('%',#{weichatacc},'%')
            </if>
            <if test="sinaacc != null and sinaacc.trim() != ''">
                and `sinaAcc` like concat('%',#{sinaacc},'%')
            </if>
            <if test="remaindermoney != null and remaindermoney.trim() != ''">
                and `RemainderMoney` like concat('%',#{remaindermoney},'%')
            </if>
            <if test="usercode != null and usercode.trim() != ''">
                and `usercode` like concat('%',#{usercode},'%')
            </if>
            <if test="recommendcode != null and recommendcode.trim() != ''">
                and `recommendCode` like concat('%',#{recommendcode},'%')
            </if>
            <if test="identification != null and identification.trim() != ''">
                and `identification` like concat('%',#{identification},'%')
            </if>
            <if test="idcardimg1 != null and idcardimg1.trim() != ''">
                and `idcardImg1` like concat('%',#{idcardimg1},'%')
            </if>
            <if test="idcard != null and idcard.trim() != ''">
                and `idcard` like concat('%',#{idcard},'%')
            </if>
            <if test="idcardimg2 != null and idcardimg2.trim() != ''">
                and `idcardImg2` like concat('%',#{idcardimg2},'%')
            </if>
            <if test="organizationimg2 != null and organizationimg2.trim() != ''">
                and `organizationImg2` like concat('%',#{organizationimg2},'%')
            </if>
            <if test="businesslicenseimg != null and businesslicenseimg.trim() != ''">
                and `businessLicenseImg` like concat('%',#{businesslicenseimg},'%')
            </if>
            <if test="taxationimg != null and taxationimg.trim() != ''">
                and `taxationImg` like concat('%',#{taxationimg},'%')
            </if>
            <if test="school != null and school.trim() != ''">
                and `school` like concat('%',#{school},'%')
            </if>
            <if test="studyHotelRoomNum != null and studyHotelRoomNum.trim() != ''">
                and `study_hotel_room_num` like concat('%',#{studyHotelRoomNum},'%')
            </if>
            <if test="payPassword != null and payPassword.trim() != ''">
                and `pay_password` like concat('%',#{payPassword},'%')
            </if>
            <if test="studyHotel != null and studyHotel.trim() != ''">
                and `study_hotel` like concat('%',#{studyHotel},'%')
            </if>
            <if test="professional != null and professional.trim() != ''">
                and `professional` like concat('%',#{professional},'%')
            </if>
            <if test="alipayAcount != null and alipayAcount.trim() != ''">
                and `alipay_Acount` like concat('%',#{alipayAcount},'%')
            </if>
            <if test="alipayQrIn != null and alipayQrIn.trim() != ''">
                and `alipay_qr_in` like concat('%',#{alipayQrIn},'%')
            </if>
            <if test="alipayQrOutDynamic != null and alipayQrOutDynamic.trim() != ''">
                and `alipay_qr_out_dynamic` like concat('%',#{alipayQrOutDynamic},'%')
            </if>
            <if test="alipayQrOutStatic != null and alipayQrOutStatic.trim() != ''">
                and `alipay_qr_out_static` like concat('%',#{alipayQrOutStatic},'%')
            </if>
            <if test="switchVoiceOrder != null and switchVoiceOrder.trim() != ''">
                and `switch_voice_order` like concat('%',#{switchVoiceOrder},'%')
            </if>
            <if test="switchVoiceInQr != null and switchVoiceInQr.trim() != ''">
                and `switch_voice_in_qr` like concat('%',#{switchVoiceInQr},'%')
            </if>
            <if test="userTypes != null">
                and `user_types` = #{userTypes}
            </if>
            <if test="userType != null">
                and `user_types` = #{userType}
            </if>
            <if test="extends1 != null and extends1.trim() != ''">
                and `extends1` like concat('%',#{extends1},'%')
            </if>
            <if test="extends2 != null and extends2.trim() != ''">
                and `extends2` like concat('%',#{extends2},'%')
            </if>
            <if test="extends3 != null and extends3.trim() != ''">
                and `extends3` like concat('%',#{extends3},'%')
            </if>
            <if test="extends4 != null and extends4.trim() != ''">
                and `extends4` like concat('%',#{extends4},'%')
            </if>
            <if test="extends5 != null and extends5.trim() != ''">
                and `extends5` like concat('%',#{extends5},'%')
            </if>
            <if test="extends6 != null and extends6.trim() != ''">
                and `extends6` like concat('%',#{extends6},'%')
            </if>
            <if test="extends7 != null and extends7.trim() != ''">
                and `extends7` like concat('%',#{extends7},'%')
            </if>
            <if test="extends8 != null and extends8.trim() != ''">
                and `extends8` like concat('%',#{extends8},'%')
            </if>
            <if test="studyHotelName != null and studyHotelName.trim() != ''">
                and `study_hotel_name` like concat('%',#{studyHotelName},'%')
            </if>
            <if test=" userType_IN != null ">
                and `user_types` in
                <foreach item="item" index="index" collection="userType_IN" open="(" separator="," close=")">
                    #{item}
                </foreach>
            </if>
            <if test="createtime_BETWEEN != null and createtime_BETWEEN.trim() != ''">
                and u.CreateTime BETWEEN #{createtime_BETWEEN_1start} AND #{createtime_BETWEEN_2end}
            </if>
        </where>
        <choose>
            <when test="sidx != null and sidx.trim() != ''">
                order by ${sidx} ${order}
            </when>
            <otherwise>
                order by u.userid desc
            </otherwise>
        </choose>
        <if test="offset != null and limit != null">
            limit #{offset}, #{limit}
        </if>
    </select>
    <select id="queryShopTotal" resultType="int">
        select count(*) from tb_user u left join t_bus_shop_info s on u.userid = s.userid
        LEFT JOIN (SELECT * FROM (SELECT * FROM
        t_bss_wallet_income_expenses order by createtime desc) w WHERE w.ie_status &lt;&gt; 0 OR w.ie_status IS NULL GROUP BY w.userid ) i on u.userid = i.userid
        <where>
            <if test="userid != null">
                and `userid` like concat('%',#{userid},'%')
            </if>
            <if test="username != null and username.trim() != ''">
                and `username` like concat('%',#{username},'%')
            </if>
            <if test="password != null and password.trim() != ''">
                and `password` like concat('%',#{password},'%')
            </if>
            <if test="name != null and name.trim() != ''">
                and `name` like concat('%',#{name},'%')
            </if>
            <if test="mobile != null and mobile.trim() != ''">
                and `mobile` like concat('%',#{mobile},'%')
            </if>
            <if test="status != null and status != ''">
                and `status` like concat('%',#{status},'%')
            </if>
            <if test="headportraitimg != null and headportraitimg.trim() != ''">
                and `HeadPortraitImg` like concat('%',#{headportraitimg},'%')
            </if>
            <if test="createtime != null and createtime != ''">
                and `CreateTime` like concat('%',#{createtime},'%')
            </if>
            <if test="signature != null and signature.trim() != ''">
                and `signature` like concat('%',#{signature},'%')
            </if>
            <if test="sex != null and sex != ''">
                and `sex` like concat('%',#{sex},'%')
            </if>
            <if test="qqacc != null and qqacc.trim() != ''">
                and `qqAcc` like concat('%',#{qqacc},'%')
            </if>
            <if test="weichatacc != null and weichatacc.trim() != ''">
                and `weichatAcc` like concat('%',#{weichatacc},'%')
            </if>
            <if test="sinaacc != null and sinaacc.trim() != ''">
                and `sinaAcc` like concat('%',#{sinaacc},'%')
            </if>
            <if test="remaindermoney != null and remaindermoney != ''">
                and `RemainderMoney` like concat('%',#{remaindermoney},'%')
            </if>
            <if test="usercode != null and usercode.trim() != ''">
                and `usercode` like concat('%',#{usercode},'%')
            </if>
            <if test="recommendcode != null and recommendcode.trim() != ''">
                and `recommendCode` like concat('%',#{recommendcode},'%')
            </if>
            <if test="identification != null and identification != ''">
                and `identification` like concat('%',#{identification},'%')
            </if>
            <if test="idcardimg1 != null and idcardimg1.trim() != ''">
                and `idcardImg1` like concat('%',#{idcardimg1},'%')
            </if>
            <if test="idcard != null and idcard.trim() != ''">
                and `idcard` like concat('%',#{idcard},'%')
            </if>
            <if test="idcardimg2 != null and idcardimg2.trim() != ''">
                and `idcardImg2` like concat('%',#{idcardimg2},'%')
            </if>
            <if test="organizationimg2 != null and organizationimg2.trim() != ''">
                and `organizationImg2` like concat('%',#{organizationimg2},'%')
            </if>
            <if test="businesslicenseimg != null and businesslicenseimg.trim() != ''">
                and `businessLicenseImg` like concat('%',#{businesslicenseimg},'%')
            </if>
            <if test="taxationimg != null and taxationimg.trim() != ''">
                and `taxationImg` like concat('%',#{taxationimg},'%')
            </if>
            <if test="school != null and school.trim() != ''">
                and `school` like concat('%',#{school},'%')
            </if>
            <if test="studyHotelRoomNum != null and studyHotelRoomNum.trim() != ''">
                and `study_hotel_room_num` like concat('%',#{studyHotelRoomNum},'%')
            </if>
            <if test="payPassword != null and payPassword.trim() != ''">
                and `pay_password` like concat('%',#{payPassword},'%')
            </if>
            <if test="studyHotel != null and studyHotel.trim() != ''">
                and `study_hotel` like concat('%',#{studyHotel},'%')
            </if>
            <if test="professional != null and professional.trim() != ''">
                and `professional` like concat('%',#{professional},'%')
            </if>
            <if test="alipayAcount != null and alipayAcount.trim() != ''">
                and `alipay_Acount` like concat('%',#{alipayAcount},'%')
            </if>
            <if test="alipayQrIn != null and alipayQrIn.trim() != ''">
                and `alipay_qr_in` like concat('%',#{alipayQrIn},'%')
            </if>
            <if test="alipayQrOutDynamic != null and alipayQrOutDynamic.trim() != ''">
                and `alipay_qr_out_dynamic` like concat('%',#{alipayQrOutDynamic},'%')
            </if>
            <if test="alipayQrOutStatic != null and alipayQrOutStatic.trim() != ''">
                and `alipay_qr_out_static` like concat('%',#{alipayQrOutStatic},'%')
            </if>
            <if test="switchVoiceOrder != null and switchVoiceOrder != ''">
                and `switch_voice_order` like concat('%',#{switchVoiceOrder},'%')
            </if>
            <if test="switchVoiceInQr != null and switchVoiceInQr != ''">
                and `switch_voice_in_qr` like concat('%',#{switchVoiceInQr},'%')
            </if>
            <if test="userTypes != null and userTypes != ''">
                and `user_types` = #{userTypes}
            </if>
            <if test="userType != null">
                and `user_types` = #{userType}
            </if>
            <if test="extends1 != null and extends1.trim() != ''">
                and `extends1` like concat('%',#{extends1},'%')
            </if>
            <if test="extends2 != null and extends2.trim() != ''">
                and `extends2` like concat('%',#{extends2},'%')
            </if>
            <if test="extends3 != null and extends3.trim() != ''">
                and `extends3` like concat('%',#{extends3},'%')
            </if>
            <if test="extends4 != null and extends4.trim() != ''">
                and `extends4` like concat('%',#{extends4},'%')
            </if>
            <if test="extends5 != null and extends5.trim() != ''">
                and `extends5` like concat('%',#{extends5},'%')
            </if>
            <if test="extends6 != null and extends6.trim() != ''">
                and `extends6` like concat('%',#{extends6},'%')
            </if>
            <if test="extends7 != null and extends7.trim() != ''">
                and `extends7` like concat('%',#{extends7},'%')
            </if>
            <if test="extends8 != null and extends8.trim() != ''">
                and `extends8` like concat('%',#{extends8},'%')
            </if>
            <if test="studyHotelName != null and studyHotelName.trim() != ''">
                and `study_hotel_name` like concat('%',#{studyHotelName},'%')
            </if>
            <if test=" userType_IN != null ">
                and `user_types` in
                <foreach item="item" index="index" collection="userType_IN" open="(" separator="," close=")">
                    #{item}
                </foreach>
            </if>
            <if test="createtime_BETWEEN != null and createtime_BETWEEN.trim() != ''">
                and u.CreateTime BETWEEN #{createtime_BETWEEN_1start} AND #{createtime_BETWEEN_2end}
            </if>
        </where>
    </select>

    <select id="queryShopObject" resultType="com.ourslook.guower.vo.TbUserVo">
        SELECT *
        FROM tb_user u left join t_bus_shop_info s on u.userid = s.userid
        LEFT JOIN (SELECT * FROM (SELECT * FROM
        t_bss_wallet_income_expenses order by createtime desc) w WHERE w.ie_status &lt;&gt; 0 OR w.ie_status IS NULL GROUP BY w.userid ) i on u.userid = i.userid
        WHERE u.userid = #{value}
    </select>

    <!--根据学校id查询该学校所有的骑手用户id-->
    <select id="queryRiderBySchoolId" resultType="java.lang.String">
        select userid from tb_user
        where `school`  =  #{schoolId}
        and `user_types` = 24
        and `status` not in(0,3)
    </select>

    <!--根据学校id查询该学校所有的楼栋长用户id-->
    <select id="queryBuildingLeaderBySchoolId" resultType="java.lang.String">
        select userid from tb_user
        where  `school`  =  #{schoolId}
        and `user_types` = 26
    </select>
</mapper>